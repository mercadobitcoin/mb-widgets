function bigNumberToShortenValue(t,e){e||(e="K");const s={Q:1e15,T:1e12,B:1e9,M:1e6,K:1e3};if(t>=s[e]){const e=Math.abs(Number(t));for(i in s)if(e>=s[i])return(e/s[i]).toFixed(4).slice(0,-2)+i}return t}Number.prototype.toFixedNoRounding=function(t){try{const e=new RegExp("^-?\\d+(?:\\.\\d{0,"+t+"})?","g");let s=this.toString();if(-1!==s.indexOf("e-"))return this.toFixed(t);s=s.match(e)[0];const a=s.indexOf(".");if(-1===a)return s+"."+"0".repeat(t);const i=t-(s.length-a)+1;return i>0?s+"0".repeat(i):s}catch(e){return this.toFixed(t)}},window.MB_WIDGETS=window.MB_WIDGETS||{},window.MB_WIDGETS.currencyFilters={filters:{ftFormatCrypto(t,e,s){if(""===t||isNaN(t))return"-";if(s){const e=bigNumberToShortenValue(t,s);if(e!==t)return e}t=(t=String(t)).replace(/((?:\.\d{8}))\d+$/,"$1");let a=4;return e&&(a=e),new Intl.NumberFormat("pt-BR",{minimumFractionDigits:a,maximumFractionDigits:a}).format(Number(t).toFixedNoRounding(a))},ftFormatCurrency(t,e,s){if(""===t||isNaN(t))return"-";let a=2;e&&(a=e);const i={minimumFractionDigits:a};return!0!==s&&(i.style="currency",i.currency="BRL"),new Intl.NumberFormat("pt-BR",i).format(Number(t).toFixedNoRounding(a))},ftFormatNumber(t,e,s,a){if(""===t||isNaN(parseFloat(t)))return t;let i=4;if(e&&(i=e),a){const e=bigNumberToShortenValue(t,a);if(e!==t)return e}let o=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:i}).format(Number(t).toFixedNoRounding(i));return s&&i>0&&(o=o.replace(/^0+(\d)|(\d),?0+$/gm,"$1$2")),o},ftBigNumberToShortenValue:(t,e)=>bigNumberToShortenValue(t,e)}};const MBWD_MOST_VALUED_ASSETS=()=>({template:'<div v-if="cptdDisplaySelf" class="mbwd-most-valued-assets"><p class="title">{{ i18n(\'Mais valorizados\') }}</p><p class="description">{{ i18n(\'Veja os 4 ativos que mais estão valorizando no Mercado Bitcoin.\') }}</p><p class="badge">{{ i18n(\'Nas últimas 24 horas\') }}</p><div class="assets"><a class="asset" v-for="asset in mostValuedAssetsList" :key="asset.symbol" :href="getAssetBasicTradeExperienceLink(asset.symbol)"><div class="attributes"><img class="icon" :src="getIconUrl(asset.icon)" :title="getIconAlt(asset.symbol)" :alt="getIconAlt(asset.symbol)"/><p class="name">{{ asset.symbol }}</p></div><span class="variation">+{{ asset.variation | ftFormatNumber(2) }}%</span></a></div></div>',props:{language:{type:String,default:"pt"},intervalTimeout:{type:Number,default:3e4}},mixins:[window.MB_WIDGETS.currencyFilters],data:()=>({intervalId:null,mostValuedAssetsList:[],translateMap:{pt:{"Mais valorizados":"Mais valorizados","Veja os 4 ativos que mais estão valorizando no Mercado Bitcoin.":"Veja os 4 ativos que mais estão valorizando no Mercado Bitcoin.","Nas últimas 24 horas":"Nas últimas 24 horas"},en:{"Mais valorizados":"Mais valorizados","Veja os 4 ativos que mais estão valorizando no Mercado Bitcoin.":"Veja os 4 ativos que mais estão valorizando no Mercado Bitcoin.","Nas últimas 24 horas":"Nas últimas 24 horas"},es:{"Mais valorizados":"Mais valorizados","Veja os 4 ativos que mais estão valorizando no Mercado Bitcoin.":"Veja os 4 ativos que mais estão valorizando no Mercado Bitcoin.","Nas últimas 24 horas":"Nas últimas 24 horas"}}}),created(){this.getMostValuedAssets(),this.scheduleGetMostValuedAssetsInterval(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)},destroy(){this.stopInterval()},computed:{cptdDisplaySelf(){return this.mostValuedAssetsList?.length>0},cptdCdnStaticDomainUrl:()=>"https://static.mercadobitcoin.com.br/web"},methods:{i18n(t){return this.translateMap?.[this.language]?.[t]??""},getIconAlt:t=>`ícone ${t}`,getIconUrl(t){return this.cptdCdnStaticDomainUrl+t},getAssetBasicTradeExperienceLink:t=>`https://www.mercadobitcoin.com.br/plataforma/clue/?command=/trade/basic/${(t??"").toLowerCase()}/brl`,async getMostValuedAssets(){try{const t=await fetch("https://store.mercadobitcoin.com.br/api/v1/marketplace/crypto/coin?sort=variation&order=DESC&limit=4");if(t.ok){const{response_data:e}=await t.json();this.mostValuedAssetsList=e?.data??[]}else this.mostValuedAssetsList=[]}catch(t){this.mostValuedAssetsList=[]}},scheduleGetMostValuedAssetsInterval(){this.intervalId=setInterval(this.getMostValuedAssets,this.intervalTimeout)},stopGetMostValuedAssetsInterval(){clearInterval(this.intervalId),this.intervalId=null},handleVisibilityChange(){"hidden"===document.visibilityState?this.stopGetMostValuedAssetsInterval():this.scheduleGetMostValuedAssetsInterval()}}});function MbwdMostValuedAssets(){return{version:"1.0.0",appendStyle(){const t=document.createElement("link");t.href="widgets/mbwd-most-valued-assets/css/mbwd-most-valued-assets.css",t.rel="stylesheet",document.head.appendChild(t)},render:function(t,e){if(!t)throw new Error("Vue is required to load this widget");if(t.version&&Number(t.version[0])<2)throw new Error("You must provide at least a Vue 2 version");if(!e)throw new Error("Provide a querySelector");this.appendStyle();const s=document.querySelector(e),a=`<mbwd-most-valued-assets language='${s.dataset.language||"pt"}' />`;s.insertAdjacentHTML("beforeend",a),new t({el:document.querySelector("mbwd-most-valued-assets"),components:{"mbwd-most-valued-assets":MBWD_MOST_VALUED_ASSETS()},created(){this.$root.$on("track",(t=>{if(s.dataset.trackAnalyticsEnabled)try{window.gtag&&gtag("event",t.en,{event_category:t.ec,event_label:t.lb})}catch(t){}}))}})}}}MbwdMostValuedAssets().render(Vue,"#mbwd-most-valued-assets");