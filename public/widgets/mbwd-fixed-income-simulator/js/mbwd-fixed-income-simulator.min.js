function bigNumberToShortenValue(e,t){t||(t="K");const a={Q:1e15,T:1e12,B:1e9,M:1e6,K:1e3};if(e>=a[t]){const t=Math.abs(Number(e));for(i in a)if(t>=a[i])return(t/a[i]).toFixed(4).slice(0,-2)+i}return e}window.MB_WIDGETS=window.MB_WIDGETS||{},window.MB_WIDGETS.configMixins={computed:{MB_WIDGETS_GLOBAL_Cdn_Static_Path:()=>window.location.host.includes("mercado-bitcoin.vipdev.lndo.site")?"http://localhost:5001/web":window.location.host.includes("localhost")?"":"https://static.mercadolitecoin.com.br/web",MB_WIDGETS_GLOBAL_Cdn_Widgets_Url(){return`${this.MB_WIDGETS_GLOBAL_Cdn_Static_Path}/widgets`},MB_WIDGETS_GLOBAL_Cdn_Assets_Icon_Url:()=>"https://static.mercadolitecoin.com.br/web"}},Number.prototype.toFixedNoRounding=function(e){try{const t=new RegExp("^-?\\d+(?:\\.\\d{0,"+e+"})?","g");let i=this.toString();if(-1!==i.indexOf("e-"))return this.toFixed(e);i=i.match(t)[0];const a=i.indexOf(".");if(-1===a)return i+"."+"0".repeat(e);const s=e-(i.length-a)+1;return s>0?i+"0".repeat(s):i}catch(t){return this.toFixed(e)}},window.MB_WIDGETS=window.MB_WIDGETS||{},window.MB_WIDGETS.currencyMixins={methods:{mxSetFiatMaskForInput(e,t){let i,a;return""===e||isNaN(parseFloat(e))?e:(-1!==e.indexOf(",")?(a=e.split(",")[1].length,i=e.replace(/\./g,"").replace(/,/g,".")):(i=e.replace(/[^0-9.]+/g,"").replace(/,/g,"."),a=t||2),i=parseFloat(i),i=i.toFixed(a),new Intl.NumberFormat("pt-BR",{minimumFractionDigits:a}).format(i))},mxSetCryptoMaskForInput(e,t,i){let a;if(""===e||isNaN(parseFloat(e)))return e;let s=8;t&&(s=t);const n={minimumFractionDigits:s};return a=-1!==e.indexOf(",")?e.replace(/\./g,"").replace(/,/g,"."):e.replace(/[^0-9.]/g,""),a=parseFloat(a),a=i?a.toFixed(s):a.toFixedNoRounding(s),new Intl.NumberFormat("pt-BR",n).format(a)},mxAllowFiatFormatOnly(e){!1==(e.charCode>=48&&e.charCode<=57||44===e.charCode||46===e.charCode)&&e.preventDefault()},mxAllowCryptoValuesOnly(e){!1==(e.charCode>=48&&e.charCode<=57||44===e.charCode)&&e.preventDefault()},mxAllowNumberValuesOnly(e){!1==(e.charCode>=48&&e.charCode<=57)&&e.preventDefault()},mxClearMasks(e,t){if(t&&-1===e.indexOf(","))return e.replace(/[\D]+/g,"");const i=(e=e.replace(/,+/gi,".")).lastIndexOf(".");if(-1===i)return e;{const t=e.substring(0,i),a=e.substring(i+1);return t.replace(/\./gi,"")+"."+a}},mxGetNumberPrecision(e){const t=String(e).split(".");return 2===t.length?Math.pow(10,t[1].length):Math.pow(10,0)}}},Number.prototype.toFixedNoRounding=function(e){try{const t=new RegExp("^-?\\d+(?:\\.\\d{0,"+e+"})?","g");let i=this.toString();if(-1!==i.indexOf("e-"))return this.toFixed(e);i=i.match(t)[0];const a=i.indexOf(".");if(-1===a)return i+"."+"0".repeat(e);const s=e-(i.length-a)+1;return s>0?i+"0".repeat(s):i}catch(t){return this.toFixed(e)}},window.MB_WIDGETS=window.MB_WIDGETS||{},window.MB_WIDGETS.currencyFilters={filters:{ftFormatCrypto(e,t,i){if(""===e||isNaN(e))return"-";if(i){const t=bigNumberToShortenValue(e,i);if(t!==e)return t}e=(e=String(e)).replace(/((?:\.\d{8}))\d+$/,"$1");let a=4;return t&&(a=t),new Intl.NumberFormat("pt-BR",{minimumFractionDigits:a,maximumFractionDigits:a}).format(Number(e).toFixedNoRounding(a))},ftFormatCurrency(e,t,i){if(""===e||isNaN(e))return"-";let a=2;t&&(a=t);const s={minimumFractionDigits:a};return!0!==i&&(s.style="currency",s.currency="BRL"),new Intl.NumberFormat("pt-BR",s).format(Number(e).toFixedNoRounding(a))},ftFormatNumber(e,t,i,a){if(""===e||isNaN(parseFloat(e)))return e;let s=4;if(t&&(s=t),a){const t=bigNumberToShortenValue(e,a);if(t!==e)return t}let n=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:s}).format(Number(e).toFixedNoRounding(s));return i&&s>0&&(n=n.replace(/^0+(\d)|(\d),?0+$/gm,"$1$2")),n},ftBigNumberToShortenValue:(e,t)=>bigNumberToShortenValue(e,t)}};const MBWD_FORM_INPUT=()=>({template:'\n<div class="mbwd-form-input-wrapper" :id="id">\n<label :class="cssInputLabel">{{label}}</label>\n<div class="input-wrapper">\n<span v-if="prefix" class="prefix">{{prefix}}</span>\n<input ref="input" :class="cssInputState" :readonly="readOnly" :disabled="disabled" :type="inputType" :maxlength="maxLength" :placeholder="placeholder" :autofocus="autofocus" @focus="onFocus" @blur="executeBlurCallbackAndValidateField" @keyup="validateAndSetValue" v-model="inputValue"/>\n<span v-if="suffix" class="suffix">{{suffix}}</span>\n</div>\n<label v-if="showHint" class="hint">{{hintText}}</label>\n<label v-if="statusError" class="errorMessage">{{errorMessage}}</label>\n</div>\n',props:{aditionalClass:{type:String,default:""},blurCallback:{type:Function,default(){}},clearRuleRegex:{type:[String,RegExp],default:null},displayClearInputButton:{type:Boolean,default:!0},displayInputRequirement:{type:[Boolean],default:!1},emptyError:{type:String,default:null},disabled:{type:[String,Boolean],default:!1},hintText:{type:String,default:""},id:{type:String,required:!0},autofocus:{type:Boolean,default:!1},label:{type:String,default:""},mask:{type:[String,Boolean],default:!1},maskCallback:{type:[String,Function],default:null},maxLength:{type:[String,Number],default:null},placeholder:{type:String,default:""},suffix:{type:String,default:""},prefix:{type:String,default:""},preventBackSpace:{type:[String,Boolean],default:!0},readOnly:{type:[String,Boolean],default:!1},required:{type:[String,Boolean],default:!0},status:{type:String,default:""},type:{type:String,default:"",required:!1},validateCallback:{type:[String,Function],default:null},validationRegex:{type:RegExp,default:null},validationRegexError:{type:String,default:null},valid:{type:[String,Boolean],required:!0},value:{type:[String,Number],default:"",required:!1}},data(){return{inputValue:this.value,active:!1,inputValid:this.valid,inputType:this.type,errorMessage:"",isPassword:!1,statusField:this.status}},computed:{cssInputState:function(){return[{active:this.active||""!==this.value&&""===this.statusField,disabled:this.disabled&&this.paramValueIsTrue(this.disabled),error:"error"===this.statusField,ok:"ok"===this.statusField}]},cssInputLabel:function(){return{required:this.displayInputRequirement&&this.required,"item-is-empty":!this.inputValue&&!this.active}},statusError:function(){return"error"===this.statusField},showHint:function(){return!this.statusError&&""!==this.hintText&&!this.valid},displayShowPassAction:function(){return""!==this.value&&this.isPassword},statusOk:function(){return"ok"===this.statusField}},watch:{value(e){this.inputValue=e},valid(e){this.inputValid=e,this.validateField()}},methods:{executeBlurCallbackAndValidateField(){this.blurCallback&&this.blurCallback(this.inputValue),Vue.nextTick((()=>{this.validateField()}))},clearField(){this.inputValue="",this.statusField="",this.errorMessage="",this.$emit("update:value",this.inputValue)},paramValueIsTrue:e=>!0===e||"true"===e,validateField(){if(this.errorMessage=this.validate(),this.inputValid=!(this.errorMessage&&(""!==this.errorMessage||null!==this.errorMessage)),this.$emit("update:valid",this.inputValid),this.active=!1,!this.readOnly){if(this.errorMessage)return this.statusField="error",!1;this.statusField=""}return!0},focus(){this.$refs.input?.focus()},onFocus(){this.active=!0},validateAndSetValue(e){this.clearRuleRegex&&(this.inputValue=this.inputValue?.replace(new RegExp(this.clearRuleRegex,"gi"),"")),8===e.keyCode&&this.preventBackSpace||!this.paramValueIsTrue(this.mask)||(this.inputValue=this.maskField(e)),this.$emit("update:value",this.inputValue)},maskField(e){return 8===e.keyCode&&this.preventBackSpace||!this.maskCallback?this.inputValue:this.maskCallback(this.inputValue)},validate(){if(this.paramValueIsTrue(this.required)){if(this._valueIsEmpty())return this.emptyError;if(this.validationRegex&&!this._isValid())return this.validationRegexError}return!1},_valueIsEmpty(){return""===this.inputValue},_isValid(){return!(this.validateCallback&&!this.validateCallback(this.inputValue))&&("string"!=typeof this.validationRegex&&"object"!=typeof this.validationRegex||this.validationRegex.test(this.inputValue))}},created(){this.isPassword="password"===this.inputType}}),MBWD_ASSETS_COMPARISON_GRAPH_BAR=()=>({template:'\n<div class="graph-bars-wrapper">\n<div class="graph-bar-item">\n<div class="bar-container">\n<div class="bar-filler" :style="cssItemPercentual(baseAsset.monthlyInterestRate)" />\n</div>\n<p class="asset-name">{{ baseAsset.displayName }}</p>\n<p class="value">{{ baseAsset.estimatedYieldAmount | ftFormatCurrency(2) }}</p>\n<p class="yield">{{ baseAsset.estimatedInterestRateLabel }} ao ano</p>\n</div>\n\n<div v-for="comparissonItem in comparissonAssets" class="graph-bar-item">\n<div class="bar-container">\n<div class="bar-filler" :style="cssItemPercentual(comparissonItem.monthlyInterestRate)" />\n</div>\n<p class="asset-name">{{ comparissonItem.displayName }}</p>\n<p class="value">{{ comparissonItem.estimatedYieldAmount | ftFormatCurrency(2) }}</p>\n<p class="yield">{{ comparissonItem.estimatedInterestRateLabel }} ao ano</p>\n</div>\n</div>\n',mixins:[window.MB_WIDGETS.currencyFilters],props:{baseAsset:{type:Object,required:!0},comparissonAssets:{type:Array,required:!0}},data:()=>({}),methods:{cssItemPercentual(e){return{height:e/this.baseAsset.monthlyInterestRate*100+"%"}}}}),MBWD_FIXED_INCOME_SIMULATOR=()=>({template:'\n<div class="mbwd-fixed-income-simulator">\n<h2 class="main-title">Simulador de Renda Fixa Digital</h2>\n<p class="main-subtitle">Veja quanto o seu dinheiro pode render com {{ asset.displayName }}.</p>\n<div class="main-wrapper">\n<div class="interactive-components-wrapper">\n<h3 class="auxiliar-title">Qual valor você gostaria de investir?</h3>\n<p class="auxiliar-subtitle">O investimento inicial em Renda Fixa Digital é de R$ {{ asset.investmentMinimumAmount }}.</p>\n<div class="investment-input-wrapper">\n<form-input\nprefix="R$"\ntype="text"\nmask="true"\nid="investedAmount"\nclear-rule-regex="[^0-9]*$" \nplaceholder="0,00"\n:maxLength="input.maxLength"\n:valid.sync="input.valid"\n:value.sync="investedAmount.maskedValue"\n:prevent-back-space="false"\n:mask-callback="inputMaskCallback"\n:validate-callback="validateInput"\n:validation-regex="/[0-9.,]/gi"\n:validation-regex-error="minimumAmountError"/>\n<div class="quick-increment-wrapper">\n<button class="quick-increment-button" @click="quickDecrementInvestedAmount">\n<img class="quick-increment-icon left" :src="MB_WIDGETS_GLOBAL_Cdn_Widgets_Url+\'/\'+\'mbwd-fixed-income-simulator\'+\'/img/icons/ico-minus-white.svg\'" />\n</button>\n<button class="quick-increment-button" @click="quickIncrementInvestedAmount">\n<img class="quick-increment-icon right" :src="MB_WIDGETS_GLOBAL_Cdn_Widgets_Url+\'/\'+\'mbwd-fixed-income-simulator\'+\'/img/icons/ico-plus-white.svg\'" />\n</button>\n</div>\n</div>\n<h3 class="auxiliar-title">Valor que você receberá no vencimento</h3>\n<p class="auxiliar-subtitle">Considerando valor investido, rendimento aproximado e preço na data de lançamento do ativo.</p>\n<p class="estimated-amount"> {{ asset.estimatedYieldAmount | ftFormatCurrency(2) }}</p>\n<a @click="trackAnalytics(\'click\', asset.symbol)" class="button" :href=basicExperiencePairTradingUrl target="_blank">Quero investir</a>\n</div>\n<div class="comparison-components-wrapper">\n<div>\n<h3 class="auxiliar-title">Prazo estimado de pagamento: {{expirationMonthStringfied}}</h3>\n<div>\n<p class="auxiliar-subtitle" v-if="asset.partialExpiration">Como este ativo possui liquidações parciais, você receberá remunerações fracionadas até o vencimento do investimento.</p>\n<p class="auxiliar-subtitle" v-else> Data prevista para o recebimento da rentabilidade total do ativo.</p>\n<p class="auxiliar-subtitle">Para mais detalhes, acesse a <a :href="asset.pdfDetailsURL" target="_blank">lâmina do ativo</a>.</p>\n</div>\n</div>\n<assets-comparison-graph-bar :baseAsset="asset" :comparissonAssets="investmentAssetsComparison" />\n</div>\n</div>\n<p class="disclaimer">A simulação é meramente ilustrativa e não constitui garantia por parte do Mercado Bitcoin, MB Tokens e/ou por qualquer empresa do grupo.</p>\n</div>\n',components:{"form-input":MBWD_FORM_INPUT(),"assets-comparison-graph-bar":MBWD_ASSETS_COMPARISON_GRAPH_BAR()},mixins:[window.MB_WIDGETS.configMixins,window.MB_WIDGETS.currencyFilters,window.MB_WIDGETS.currencyMixins],data(){const e=document.getElementById("mbwd-fixed-income-simulator"),t=JSON.parse(e.dataset.asset),i=JSON.parse(e.dataset.investmentAssetsComparison);return{analytics:{event:{category:e.dataset.analyticsEventCategory,name:"",label:""}},investedAmount:{rawValue:t.investmentMinimumAmount,maskedValue:this.$options.filters.ftFormatCurrency(t.investmentMinimumAmount,2,!0)},quickIncrementDefaultValue:100,asset:t,investmentAssetsComparison:i,input:{valid:!0,errorMessage:"Valor mínimo ",maxLength:12,maxValue:9999999.99}}},computed:{basicExperiencePairTradingUrl(){return`https://www.mercadobitcoin.com.br/plataforma/clue/?command=/trade/basic/${this.asset.symbol}/brl`},minimumAmountError(){return this.input.errorMessage+this.$options.filters.ftFormatCurrency(this.asset.investmentMinimumAmount,2)},expirationMonthStringfied(){var e=new Date(this.asset.expirationDate);const t=e.getFullYear();return`${e.toLocaleString("pt-br",{month:"long"})}/${t}`}},watch:{"investedAmount.maskedValue":function(e){const t=parseFloat(this.mxClearMasks(String(e)));this.investedAmount.rawValue=t,this.calculateAndUpdateEstimatedYield()}},mounted(){this.calculateAndUpdateEstimatedYield()},methods:{cssItemPercentual(e){return{height:e/this.asset.monthlyInterestRate*100+"%"}},getEstimateReturnAmount(e,t,i){const a=new Date(i);return e*(1+t)**this.diffInMonths(new Date(a),new Date)},diffInMonths(e,t){var i=Math.abs(e.getTime()-t.getTime());return Math.round(i/26298e5)},quickIncrementInvestedAmount(){this.investedAmount.rawValue+this.quickIncrementDefaultValue>9999999.99?this.investedAmount.maskedValue=this.$options.filters.ftFormatNumber(9999999.99,2):(this.investedAmount.maskedValue=this.$options.filters.ftFormatNumber(this.investedAmount.rawValue+this.quickIncrementDefaultValue,2),this.validateInput(this.investedAmount.maskedValue))},quickDecrementInvestedAmount(){this.investedAmount.rawValue-this.quickIncrementDefaultValue<0?this.investedAmount.maskedValue=this.$options.filters.ftFormatNumber(0,2):(this.investedAmount.maskedValue=this.$options.filters.ftFormatNumber(this.investedAmount.rawValue-this.quickIncrementDefaultValue,2),this.validateInput(this.investedAmount.maskedValue))},validateInput(e){const t=parseFloat(this.mxClearMasks(e));return t?t<parseFloat(this.asset.investmentMinimumAmount)?(this.input.valid=!1,!1):(this.input.valid=!0,!0):(this.input.valid=!1,!1)},inputMaskCallback(e){return e?(e=e.replace(/[\D]+/g,""),e=String(parseInt(e)),this.$options.filters.ftFormatNumber(e/Math.pow(10,2),2)):e},calculateAndUpdateEstimatedYield(){for(this.investedAmount.rawValue,this.asset.estimatedYieldAmount=this.getEstimateReturnAmount(this.investedAmount.rawValue,this.asset.monthlyInterestRate,this.asset.expirationDate),i=0,j=this.investmentAssetsComparison.length;i<j;i++)this.investmentAssetsComparison[i].estimatedYieldAmount=this.getEstimateReturnAmount(this.investedAmount.rawValue,this.investmentAssetsComparison[i].monthlyInterestRate,this.asset.expirationDate)},trackAnalytics(e,t){this.analytics.event.name=e,this.analytics.event.label=t,this.emitAnalyticsEvent()},emitAnalyticsEvent(){this.$root.$emit("track-analytics",{ec:this.analytics.event.category,en:this.analytics.event.name,lb:`fixed-income-simulator:${this.analytics.event.label}`})}}});function MbwdFixedIncomeSimulator(){return{version:"1.0.0",appendStyle(){const e=document.createElement("link");window.location.host.includes("localhost")?e.href="widgets/mbwd-fixed-income-simulator/css/mbwd-fixed-income-simulator.css":window.location.host.includes("mercado-bitcoin.vipdev.lndo.site")?e.href="http://localhost:5001/web/widgets/mbwd-fixed-income-simulator/css/mbwd-fixed-income-simulator.css":e.href="https://static.mercadolitecoin.com.br/web/widgets/mbwd-fixed-income-simulator/css/mbwd-fixed-income-simulator.css",e.rel="stylesheet",document.head.appendChild(e)},render:function(e,t){if(!e)throw Error("Vue is required to load this widget");if(e.version&&Number(e.version[0])<2)throw Error("You must provide at least a Vue 2 version");if(!t)throw Error("Provide a querySelector");this.appendStyle();const i=document.querySelector(t);i.insertAdjacentHTML("beforeend","<mbwd-fixed-income-simulator/>"),new e({el:document.querySelector("mbwd-fixed-income-simulator"),components:{"mbwd-fixed-income-simulator":MBWD_FIXED_INCOME_SIMULATOR()},created(){this.$root.$on("track-analytics",(e=>{if(console.log("eee",e),i.dataset.trackAnalyticsEnabled)try{window.gtag&&gtag("event",e.en,{event_category:e.ec,event_label:e.lb})}catch(e){}}))}})}}}MbwdFixedIncomeSimulator().render(Vue,"#mbwd-fixed-income-simulator");